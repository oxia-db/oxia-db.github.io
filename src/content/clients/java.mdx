---
sidebarTitle: Java
---

import {Tabs} from 'nextra/components'

# Java Client SDK


## Installing Java client SDK

<Tabs items={['Maven', 'Gradle']}>
    <Tabs.Tab>
        ```xml
        <dependency>
            <groupId>io.github.oxia-db</groupId>
            <artifactId>oxia-client</artifactId>
            <version>${VERSION}</version>
        </dependency>
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```java
        implementation("io.github.oxia-db:oxia-client:${VERSION}")
        ```
    </Tabs.Tab>
</Tabs>

Javadoc documentation is available at https://oxia-db.github.io/oxia-client-java/apidocs/latest

## Sync and Async APIs

Oxia provides two API flavors in the client:
 * ***Sync***: Easier and convenient to use. Methods are blocking and return the result of the operation.
 * ***Async***: Returns futures to track completion of the operations. Allows having more operations outstanding
and achieving higher throughput.

## Client API

### Initializing the client

To use the Oxia client, you need to create a client instance. Once created, a client instance will be valid until
it's explicitly closed, and it can be used from different threads.

<Tabs items={['Sync', 'Async']}>
    <Tabs.Tab>
        ```java
        SyncOxiaClient client = OxiaClientBuilder.create("localhost:6648")
                .namespace("my-namespace")
                .syncClient();
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```java
        AsyncOxiaClient client = OxiaClientBuilder.create("localhost:6648")
                .namespace("my-namespace")
                .asyncClient()
                .get();
        ```
    </Tabs.Tab>
</Tabs>

For the full list of options when creating an Oxia clint, please refer to the [OxiaClientBuilder Javadocs](https://oxia-db.github.io/oxia-client-java/apidocs/latest/io/oxia/client/api/OxiaClientBuilder.html).

### Writing records

<Tabs items={['Sync', 'Async']}>
    <Tabs.Tab>
        ```java
        // Write a record to Oxia with the specified key and value, and with the expectation
        // that the record does not already exist.
        PutResult res = client.put("my-key", "my-value".getBytes(), Set.of(IfRecordDoesNotExist));

        // Write a record with the expectation that it has not changed since the previous write.
        // If there was any change, the operation will fail
        client.put("my-key", "my-value-2".getBytes(),
                    Set.of(IfVersionIdEquals(res.version().versionId())));
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```java
        // Write a record to Oxia with the specified key and value, and with the expectation
        // that the record does not already exist.
        client.put("my-string", "my-value".getBytes(), Set.of(IfRecordDoesNotExist))
                .thenAccept(res -> {
                    log.info("Put result: {}", res);
                }).exceptionally(ex -> {
                    log.warn("Put failed", ex);
                    return null;
                });

        // Write a record with the expectation that it has not changed since the previous write.
        // If there was any change, the operation will fail
        client.put("my-key", "my-value-2".getBytes(),
                    Set.of(IfVersionIdEquals(res.version().versionId())))
                .thenAccept(res -> {
                    log.info("Put result: {}", res);
                }).exceptionally(ex -> {
                    log.warn("Put failed", ex);
                    return null;
                });
        ```
    </Tabs.Tab>
</Tabs>

All the options for the put operation are available in the
[Javadocs](https://oxia-db.github.io/oxia-client-java/apidocs/latest/io/oxia/client/api/PutOption.html).

### Reading records

Reading the value of a record

<Tabs items={['Sync', 'Async']}>
    <Tabs.Tab>
        ```java
        GetResult res = client.get("my-key");
        log.info("Got key: {} - value: {} - version: {}",
                    res.getKey(), res.getValue(), res.getVersion());
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```java
        aclient.get("my-key")
                .thenAccept(res -> {
                    log.info("Got key: {} - value: {} - version: {}",
                            res.getKey(), res.getValue(), res.getVersion());
                }).exceptionally(ex -> {
                    log.warn("Get failed", ex);
                    return null;
                });
        ```
    </Tabs.Tab>
</Tabs>

All the options for the get operation are available in the
[Javadocs](https://oxia-db.github.io/oxia-client-java/apidocs/latest/io/oxia/client/api/GetOption.html).

### Deleting records

Delete a single record by key. Supports conditional deletes using version-based expectations.

<Tabs items={['Sync', 'Async']}>
    <Tabs.Tab>
        ```java
        // Unconditional delete
        client.delete("my-key");

        // Conditional delete: only succeed if the version matches
        client.delete("my-key", Set.of(IfVersionIdEquals(version.versionId())));
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```java
        client.delete("my-key")
                .thenAccept(v -> {
                    log.info("Delete succeeded");
                }).exceptionally(ex -> {
                    log.warn("Delete failed", ex);
                    return null;
                });
        ```
    </Tabs.Tab>
</Tabs>

All the options for the delete operation are available in the
[Javadocs](https://oxia-db.github.io/oxia-client-java/apidocs/latest/io/oxia/client/api/DeleteOption.html).

### Deleting a range of records

Delete all records whose keys fall within a specified range.

<Tabs items={['Sync', 'Async']}>
    <Tabs.Tab>
        ```java
        // Delete all keys in the range [minKeyInclusive, maxKeyExclusive)
        client.deleteRange("/users/", "/users//");
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```java
        client.deleteRange("/users/", "/users//")
                .thenAccept(v -> {
                    log.info("DeleteRange succeeded");
                }).exceptionally(ex -> {
                    log.warn("DeleteRange failed", ex);
                    return null;
                });
        ```
    </Tabs.Tab>
</Tabs>

### Listing keys

List the keys within a specified range, without fetching the associated values.

<Tabs items={['Sync', 'Async']}>
    <Tabs.Tab>
        ```java
        List<String> keys = client.list("/users/", "/users//");
        keys.forEach(key -> log.info("Key: {}", key));
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```java
        client.list("/users/", "/users//")
                .thenAccept(keys -> {
                    keys.forEach(key -> log.info("Key: {}", key));
                }).exceptionally(ex -> {
                    log.warn("List failed", ex);
                    return null;
                });
        ```
    </Tabs.Tab>
</Tabs>

### Scanning records

Scan records in a key range, returning both keys and values.

<Tabs items={['Sync', 'Async']}>
    <Tabs.Tab>
        ```java
        List<GetResult> results = client.rangeScan("/users/", "/users//");
        results.forEach(r -> log.info("Key: {} - Value: {} - Version: {}",
                r.getKey(), new String(r.getValue()), r.getVersion()));
        ```
    </Tabs.Tab>
    <Tabs.Tab>
        ```java
        client.rangeScan("/users/", "/users//")
                .thenAccept(results -> {
                    results.forEach(r -> log.info("Key: {} - Value: {}",
                            r.getKey(), new String(r.getValue())));
                }).exceptionally(ex -> {
                    log.warn("RangeScan failed", ex);
                    return null;
                });
        ```
    </Tabs.Tab>
</Tabs>

For the complete list of options available on all operations, please refer to the
[Javadocs](https://oxia-db.github.io/oxia-client-java/apidocs/latest/io/oxia/client/api/package-summary.html).

